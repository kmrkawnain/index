<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<title>Flying Modi â€“ Mobile Edition</title>

<style>
* {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

body {
  margin: 0;
  overflow: hidden;
  background: linear-gradient(#87CEEB, #ffffff);
  font-family: system-ui, sans-serif;
}

#game {
  position: relative;
  width: 100vw;
  height: 100vh;
}

.bird {
  width: 60px;
  height: 60px;
  background-image: url("https://globalwiki.org/images/3/3e/Narendra-Modi.jpeg");
  background-size: cover;
  background-position: center;
  border-radius: 50%;
  border: 3px solid #ff9933;
  position: absolute;
  left: 80px;
}

.pipe {
  width: 60px;
  position: absolute;
  border-radius: 8px;
}

.info {
  position: absolute;
  top: 10px;
  left: 10px;
  font-size: 18px;
  font-weight: bold;
  z-index: 10;
}

#start {
  position: absolute;
  top: 45%;
  width: 100%;
  text-align: center;
  font-size: 24px;
  font-weight: bold;
  color: #1e3799;
}

#gameOver {
  display: none;
  position: absolute;
  top: 35%;
  width: 100%;
  text-align: center;
  font-size: 40px;
  color: #d32f2f;
  font-weight: bold;
}

button {
  margin-top: 20px;
  padding: 12px 30px;
  font-size: 18px;
  border: none;
  border-radius: 40px;
  background: #ff9933;
  color: white;
}
</style>
</head>

<body>

<div id="game">
  <div class="info">
    Score: <span id="score">0</span> |
    Level: <span id="level">1</span>
  </div>

  <div id="start">Tap to Start ðŸš€</div>
  <div id="gameOver">
    GAME OVER<br/>
    <button onclick="resetGame()">Restart</button>
  </div>

  <div class="bird" id="bird"></div>

  <audio id="bgMusic" loop preload="auto">
    <source src="bg.mp3" type="audio/mpeg" />
  </audio>
</div>

<script>
const game = document.getElementById("game");
const bird = document.getElementById("bird");
const scoreEl = document.getElementById("score");
const levelEl = document.getElementById("level");
const startEl = document.getElementById("start");
const gameOverEl = document.getElementById("gameOver");
const music = document.getElementById("bgMusic");

let birdY = window.innerHeight / 2;
let velocity = 0;
let gravity = 0.45;
let lift = -8;

let score = 0;
let level = 1;
let speed = 3;
let pipes = [];
let running = false;

bird.style.top = birdY + "px";

function randomColor() {
  const colors = ["#138808", "#ff9933", "#1e90ff", "#9c27b0", "#e91e63"];
  return colors[Math.floor(Math.random() * colors.length)];
}

function startGame() {
  if (running) return;
  running = true;
  startEl.style.display = "none";
  gameOverEl.style.display = "none";
  music.play().catch(() => {});
  spawnPipe();
  requestAnimationFrame(loop);
}

function spawnPipe() {
  if (!running) return;

  const gap = 180 - level * 5;
  const topHeight = Math.random() * 250 + 50;
  const color = randomColor();

  const top = document.createElement("div");
  const bottom = document.createElement("div");

  top.className = bottom.className = "pipe";
  top.style.background = bottom.style.background = color;

  top.style.height = topHeight + "px";
  top.style.top = "0";
  top.style.left = window.innerWidth + "px";

  bottom.style.height =
    window.innerHeight - topHeight - gap + "px";
  bottom.style.bottom = "0";
  bottom.style.left = window.innerWidth + "px";

  game.append(top, bottom);
  pipes.push({ top, bottom });

  setTimeout(spawnPipe, 1800 - level * 80);
}

function loop() {
  if (!running) return;

  velocity += gravity;
  birdY += velocity;
  bird.style.top = birdY + "px";

  for (let i = pipes.length - 1; i >= 0; i--) {
    const p = pipes[i];
    const left = p.top.offsetLeft - speed;

    p.top.style.left = left + "px";
    p.bottom.style.left = left + "px";

    if (
      bird.offsetLeft + 50 > left &&
      bird.offsetLeft < left + 60 &&
      (birdY < p.top.offsetHeight ||
        birdY + 50 >
          window.innerHeight - p.bottom.offsetHeight)
    ) {
      endGame();
    }

    if (left < -70) {
      p.top.remove();
      p.bottom.remove();
      pipes.splice(i, 1);
      score++;
      scoreEl.textContent = score;

      if (score % 5 === 0) {
        level++;
        levelEl.textContent = level;
        speed += 0.5;
      }
    }
  }

  if (birdY < 0 || birdY > window.innerHeight) endGame();

  requestAnimationFrame(loop);
}

function endGame() {
  running = false;
  gameOverEl.style.display = "block";
}

function resetGame() {
  pipes.forEach(p => {
    p.top.remove();
    p.bottom.remove();
  });
  pipes = [];
  birdY = window.innerHeight / 2;
  velocity = 0;
  score = 0;
  level = 1;
  speed = 3;
  scoreEl.textContent = score;
  levelEl.textContent = level;
  bird.style.top = birdY + "px";
  startEl.style.display = "block";
}

function flap() {
  if (!running) startGame();
  velocity = lift;
}

game.addEventListener("touchstart", e => {
  e.preventDefault();
  flap();
}, { passive: false });

game.addEventListener("click", flap);
</script>

</body>
</html>
