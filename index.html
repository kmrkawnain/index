<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ultra Modi Bird Game</title>

<style>
body {
  margin: 0;
  overflow: hidden;
  background: linear-gradient(#87CEEB, #ffffff);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

#game {
  position: relative;
  width: 100vw;
  height: 100vh;
  cursor: pointer;
}

.bird {
  width: 65px;
  height: 65px;
  background-image: url('https://globalwiki.org/images/3/3e/Narendra-Modi.jpeg');
  background-size: cover;
  background-position: center;
  border-radius: 50%;
  border: 3px solid #ff9933;
  position: absolute;
  left: 100px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  z-index: 5;
}

.pipe {
  width: 60px;
  background: #138808;
  position: absolute;
  border: 2px solid #fff;
  border-radius: 5px;
}

.info {
  position: absolute;
  top: 15px;
  left: 15px;
  font-size: 22px;
  font-weight: bold;
  z-index: 10;
  color: #333;
  text-shadow: 1px 1px white;
}

.game-over {
  position: absolute;
  top: 35%;
  width: 100%;
  text-align: center;
  font-size: 50px;
  display: none;
  z-index: 20;
  color: #d32f2f;
  font-weight: 900;
}

button {
  padding: 15px 35px;
  font-size: 20px;
  cursor: pointer;
  background: #ff9933;
  color: white;
  border: none;
  border-radius: 50px;
  font-weight: bold;
}

#start-msg {
  position: absolute;
  top: 50%;
  width: 100%;
  text-align: center;
  font-size: 26px;
  color: #1e3799;
  font-weight: bold;
}
</style>
</head>

<body>

<div id="game">
  <div class="info">
    Score: <span id="score">0</span> |
    Lives: <span id="lives">3</span> |
    Level: <span id="level">1</span>
  </div>

  <div id="start-msg">Tap / Click / Space to Start ðŸŽµ</div>
  <div class="bird" id="bird"></div>

  <div class="game-over" id="gameOver">
    GAME OVER <br><br>
    <button onclick="resetGame()">Restart</button>
  </div>

  <!-- BACKGROUND MUSIC -->
  <audio id="bgMusic" loop preload="auto">
    <source src="bg.mp3" type="audio/mpeg">
  </audio>
</div>

<script>
const bird = document.getElementById("bird");
const scoreEl = document.getElementById("score");
const livesEl = document.getElementById("lives");
const levelEl = document.getElementById("level");
const gameOverEl = document.getElementById("gameOver");
const startMsg = document.getElementById("start-msg");
const bgMusic = document.getElementById("bgMusic");

let birdY = 250;
let velocity = 0;
let gravity = 0.45;
let lift = -8.5;

let score = 0;
let lives = 3;
let level = 1;
let speed = 4;
let pipes = [];
let gameRunning = false;
let pipeInterval = null;

bird.style.top = birdY + "px";

function startGame() {
  if (gameRunning) return;

  gameRunning = true;
  startMsg.style.display = "none";
  gameOverEl.style.display = "none";

  bgMusic.play().catch(() => {}); // USER INTERACTION SAFE

  pipeInterval = setInterval(createPipe, 1700);
  requestAnimationFrame(gameLoop);
}

function createPipe() {
  if (!gameRunning) return;

  const gap = 190;
  const topHeight = Math.random() * 280 + 50;

  const topPipe = document.createElement("div");
  const bottomPipe = document.createElement("div");

  topPipe.className = bottomPipe.className = "pipe";

  topPipe.style.height = topHeight + "px";
  topPipe.style.top = "0";
  topPipe.style.left = window.innerWidth + "px";

  bottomPipe.style.height =
    window.innerHeight - topHeight - gap + "px";
  bottomPipe.style.bottom = "0";
  bottomPipe.style.left = window.innerWidth + "px";

  document.getElementById("game").append(topPipe, bottomPipe);
  pipes.push({ top: topPipe, bottom: bottomPipe });
}

function gameLoop() {
  if (!gameRunning) return;

  velocity += gravity;
  birdY += velocity;
  bird.style.top = birdY + "px";

  for (let i = pipes.length - 1; i >= 0; i--) {
    const p = pipes[i];
    const left = p.top.offsetLeft - speed;

    p.top.style.left = left + "px";
    p.bottom.style.left = left + "px";

    if (
      bird.offsetLeft + 55 > left &&
      bird.offsetLeft < left + 60 &&
      (birdY < p.top.offsetHeight ||
        birdY + 55 >
          window.innerHeight - p.bottom.offsetHeight)
    ) {
      lives--;
      livesEl.textContent = lives;
      p.top.remove();
      p.bottom.remove();
      pipes.splice(i, 1);
      if (lives <= 0) endGame();
    }

    if (left < -60) {
      p.top.remove();
      p.bottom.remove();
      pipes.splice(i, 1);
      score++;
      scoreEl.textContent = score;

      if (score % 5 === 0) {
        level++;
        levelEl.textContent = level;
        speed += 0.6;
      }
    }
  }

  if (birdY < 0 || birdY > window.innerHeight) endGame();

  requestAnimationFrame(gameLoop);
}

function endGame() {
  gameRunning = false;
  clearInterval(pipeInterval);
  gameOverEl.style.display = "block";
}

function resetGame() {
  document.querySelectorAll(".pipe").forEach(p => p.remove());
  pipes = [];
  birdY = 250;
  velocity = 0;
  score = 0;
  lives = 3;
  level = 1;
  speed = 4;

  scoreEl.textContent = score;
  livesEl.textContent = lives;
  levelEl.textContent = level;

  bird.style.top = birdY + "px";
  startMsg.style.display = "block";
}

function input() {
  if (!gameRunning) startGame();
  velocity = lift;
}

document.getElementById("game").addEventListener("click", input);
document.addEventListener("keydown", e => {
  if (e.code === "Space" || e.code === "ArrowUp") input();
});
</script>

</body>
</html>
